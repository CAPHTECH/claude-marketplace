# Predict-Light テンプレート

P0/P1/P2 各レベルのアウトプットテンプレート。

## P0テンプレート（3行要約）

```markdown
## Predict-Light: P0

**変更要約**: <1行で何を変更するか>
**影響範囲**: <1行で影響するファイル/モジュール>
**リスク**: Low（P1/P2判定条件に非該当）
```

## P1テンプレート（影響リスト+停止条件）

```markdown
## Predict-Light: P1

### 判定理由
- [ ] 複数ファイル変更
- [ ] テスト未カバー領域の変更
- [ ] 外部依存変更
- Manual Override: なし / あり（理由: ）

### 影響ファイルリスト
| ファイル | 変更種別 | リスク |
|----------|----------|--------|
| `path/to/file.ts` | 修正 | Low/Medium/High |

### 簡易リスク評価
- 因果タイプ: 互換性 / 性能 / 信頼性 / セキュリティ / 可観測性
- リスクレベル: Low / Medium / High

### 停止条件
- [ ] 想定外のテスト失敗が3回以上
- [ ] 観測不能な変更の増加
- [ ] ロールバック不可能な状態
```

## P2テンプレート（フル影響分析+段階化計画）

```markdown
## Predict-Light: P2

### 判定理由
- [ ] 公開API変更
- [ ] DB変更（スキーマ/マイグレーション）
- [ ] 認証認可変更
- [ ] 課金ロジック変更
- Manual Override: なし / あり（理由: ）

### 直接影響

| 変更点 | 因果タイプ | リスク | 対策 |
|--------|-----------|--------|------|
| <変更1> | 互換性 | High | 段階リリース |
| <変更2> | 性能 | Medium | ベンチマーク |

### 間接影響（依存先への伝播）

| 依存先 | 影響内容 | リスク | 確認方法 |
|--------|----------|--------|----------|
| <ファイル1> | <影響> | <リスク> | <テスト名> |

### 未確認の影響（unknown）
<!-- 静的に追跡困難な依存 -->
- DI経由での呼び出し
- 設定ファイルからの参照

### 段階化計画

#### Step 1: <準備>
- 変更内容:
- 検証方法:
- ロールバック:

#### Step 2: <実装>
- 変更内容:
- 検証方法:
- ロールバック:

#### Step N: <統合>
- 変更内容:
- 検証方法:
- ロールバック:

### Evaluator Quality要件
- 推奨E要件: E2以上
- セキュリティ関連: E3必須

### 停止条件

#### 標準停止条件
- [ ] 想定外のテスト失敗が3回以上
- [ ] 観測不能な変更の増加
- [ ] ロールバック不可能な状態

#### カスタム停止条件
- [ ]
- [ ]
```

## 機械判定基準サマリ

```
P2判定（いずれかに該当）:
  ☐ 公開API変更（export/public interfaceの変更）
  ☐ DB変更（migration/schema変更）
  ☐ 認証認可変更（auth/permission/role変更）
  ☐ 課金ロジック変更（billing/payment/pricing変更）

P1判定（P2非該当 + いずれかに該当）:
  ☐ 変更ファイル数 > 1
  ☐ テスト未カバー行の変更
  ☐ 外部依存の変更（package.json/go.mod等）

P0判定:
  ☐ 上記すべてに非該当
```
