---
name: proprioceptive-dev-agent
description: |
  固有受容感覚を備えた開発エージェントの技能体系を適用し、目的/制約/証拠/停止条件の契約化、身体図の更新、影響予測、微小変更と検証の閉ループを設計・実行する。
  トリガー条件: 「固有受容感覚」「閉ループ」「安全上限」「自律的編集」「影響予測」「証拠パック」などの要求があるとき。
---

# Proprioceptive Dev Agent Skill

目的は「賢く動く」よりも「壊さずに収束する」こと。安全上限を持った自律編集と検証の反復を設計する。

## 使い方（標準ループ）

1. **契約化**: 目的・不変条件・物差し・停止条件を明文化
2. **触診**: シンボル/設定/データ/境界の身体図を更新
3. **予測**: 影響を因果タイプで分類し、危険なら段階化
4. **微小変更**: 小さく変更し、即時に静的診断
5. **反射の選択**: 機械反射か設計反射かを判定
6. **現実接地**: ビルド/テストでズレを特定して収束
7. **回帰耐性強化**: 再発防止テスト/不変条件を追加
8. **証拠パック**: 因果と証拠が整合する形で提出

## 入出力（最低限の感覚器）

- **静的**: LSP（定義/参照/型/診断）、コード検索（rg/AST/LSIF）、VCS（git diff/履歴/ブランチ）
- **動的**: ビルド・テスト結果、例外/スタックトレース、必要に応じて運用観測（ログ/メトリクス/トレース）

不足がある場合は「感知の限界」を宣言し、物差し不足として扱う。

## コア概念

- **身体図**: コードを構造と依存のネットワークとして持つ内部地図（複数地図の重ね合わせ）
- **物差し**: 受け入れ条件/不変条件/テスト/API契約/非機能上限/ログ契約
- **証拠**: 第三者が追跡できる検証結果

## レイヤー運用の要点（短縮）

- **Layer 0**: 目的・リスク予算・停止条件を先に固定する
- **Layer 1**: 触診で「繋がり」を把握し、設定や境界も身体として扱う
- **Layer 2**: 影響を互換性/性能/信頼性/セキュリティ/可観測性で分類する
- **Layer 3**: 微小ステップと反射の強度制御で収束させる
- **Layer 4**: 証拠パックと説明責任でブラックボックス化を防ぐ

## 失敗パターン（必ず回避）

- 静的整合だけで完了扱いする
- 表層エラーを消すための無理なキャストや例外握り潰し
- 参照が無いから安全と判断する（DI/生成/設定駆動）
- 物差し不足なのに意味の正しさを断言する

## 出力（証拠パック）

- 目的と受け入れ条件
- 変更点の意味と影響分類
- 実行した検証と結果
- 回帰防止（テスト/不変条件）

## 参照（詳細）

詳細定義・全レイヤー・成熟度・破綻パターンは以下を参照。
- `references/core.md`
